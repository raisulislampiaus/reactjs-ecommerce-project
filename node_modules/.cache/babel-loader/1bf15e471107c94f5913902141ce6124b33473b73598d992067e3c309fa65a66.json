{"ast":null,"code":"import axios from \"axios\";\nimport { act } from \"react-dom/test-utils\";\nimport baseURL from \"../../../utils/baseURL\";\nimport { resetErrAction, resetSuccessAction } from \"../globalActions/globalActions\";\nconst {\n  createAsyncThunk,\n  createSlice\n} = require(\"@reduxjs/toolkit\");\n\n//initalsState\nconst initialState = {\n  categories: [],\n  category: {},\n  loading: false,\n  error: null,\n  isAdded: false,\n  isUpdated: false,\n  isDelete: false\n};\n\n//create Category action\nexport const createCategoryAction = createAsyncThunk(\"category/create\", async (payload, _ref) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref;\n  console.log(payload);\n  try {\n    var _getState, _getState$users, _getState$users$userA, _getState$users$userA2;\n    const {\n      name,\n      file\n    } = payload;\n    //fromData\n    const formData = new FormData();\n    formData.append(\"name\", name);\n    formData.append(\"file\", file);\n    //Token - Authenticated\n    const token = (_getState = getState()) === null || _getState === void 0 ? void 0 : (_getState$users = _getState.users) === null || _getState$users === void 0 ? void 0 : (_getState$users$userA = _getState$users.userAuth) === null || _getState$users$userA === void 0 ? void 0 : (_getState$users$userA2 = _getState$users$userA.userInfo) === null || _getState$users$userA2 === void 0 ? void 0 : _getState$users$userA2.token;\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    //Images\n    const {\n      data\n    } = await axios.post(`${baseURL}/categories`, formData, config);\n    return data;\n  } catch (error) {\n    var _error$response;\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n});\n\n//fetch Categories action\nexport const fetchCategoriesAction = createAsyncThunk(\"category/fetch All\", async (payload, _ref2) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref2;\n  try {\n    const {\n      data\n    } = await axios.get(`${baseURL}/categories`);\n    return data;\n  } catch (error) {\n    var _error$response2;\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n});\n//slice\nconst categorySlice = createSlice({\n  name: \"categories\",\n  initialState,\n  extraReducers: builder => {\n    //create\n    builder.addCase(createCategoryAction.pending, state => {\n      state.loading = true;\n    });\n    builder.addCase(createCategoryAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.category = action.payload;\n      state.isAdded = true;\n    });\n    builder.addCase(createCategoryAction.rejected, (state, action) => {\n      state.loading = false;\n      state.category = null;\n      state.isAdded = false;\n      state.error = action.payload;\n    });\n\n    //fetch all\n    builder.addCase(fetchCategoriesAction.pending, state => {\n      state.loading = true;\n    });\n    builder.addCase(fetchCategoriesAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.categories = action.payload;\n    });\n    builder.addCase(fetchCategoriesAction.rejected, (state, action) => {\n      state.loading = false;\n      state.categories = null;\n      state.error = action.payload;\n    });\n    //Reset err\n    builder.addCase(resetErrAction.pending, (state, action) => {\n      state.error = null;\n    });\n    //Reset success\n    builder.addCase(resetSuccessAction.pending, (state, action) => {\n      state.isAdded = false;\n    });\n  }\n});\n\n//generate the reducer\nconst categoryReducer = categorySlice.reducer;\nexport default categoryReducer;","map":{"version":3,"names":["axios","act","baseURL","resetErrAction","resetSuccessAction","createAsyncThunk","createSlice","require","initialState","categories","category","loading","error","isAdded","isUpdated","isDelete","createCategoryAction","payload","rejectWithValue","getState","dispatch","console","log","name","file","formData","FormData","append","token","users","userAuth","userInfo","config","headers","Authorization","data","post","response","fetchCategoriesAction","get","categorySlice","extraReducers","builder","addCase","pending","state","fulfilled","action","rejected","categoryReducer","reducer"],"sources":["/home/raisul/Downloads/mern-ecommerce-course-frontend-main/src/redux/slices/categories/categoriesSlice.js"],"sourcesContent":["import axios from \"axios\";\nimport { act } from \"react-dom/test-utils\";\nimport baseURL from \"../../../utils/baseURL\";\nimport {\n  resetErrAction,\n  resetSuccessAction,\n} from \"../globalActions/globalActions\";\nconst { createAsyncThunk, createSlice } = require(\"@reduxjs/toolkit\");\n\n//initalsState\nconst initialState = {\n  categories: [],\n  category: {},\n  loading: false,\n  error: null,\n  isAdded: false,\n  isUpdated: false,\n  isDelete: false,\n};\n\n//create Category action\nexport const createCategoryAction = createAsyncThunk(\n  \"category/create\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    console.log(payload);\n    try {\n      const { name, file } = payload;\n      //fromData\n      const formData = new FormData();\n      formData.append(\"name\", name);\n      formData.append(\"file\", file);\n      //Token - Authenticated\n      const token = getState()?.users?.userAuth?.userInfo?.token;\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n      //Images\n      const { data } = await axios.post(\n        `${baseURL}/categories`,\n        formData,\n        config\n      );\n      return data;\n    } catch (error) {\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//fetch Categories action\nexport const fetchCategoriesAction = createAsyncThunk(\n  \"category/fetch All\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    try {\n      const { data } = await axios.get(`${baseURL}/categories`);\n      return data;\n    } catch (error) {\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n//slice\nconst categorySlice = createSlice({\n  name: \"categories\",\n  initialState,\n  extraReducers: (builder) => {\n    //create\n    builder.addCase(createCategoryAction.pending, (state) => {\n      state.loading = true;\n    });\n    builder.addCase(createCategoryAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.category = action.payload;\n      state.isAdded = true;\n    });\n    builder.addCase(createCategoryAction.rejected, (state, action) => {\n      state.loading = false;\n      state.category = null;\n      state.isAdded = false;\n      state.error = action.payload;\n    });\n\n    //fetch all\n    builder.addCase(fetchCategoriesAction.pending, (state) => {\n      state.loading = true;\n    });\n    builder.addCase(fetchCategoriesAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.categories = action.payload;\n    });\n    builder.addCase(fetchCategoriesAction.rejected, (state, action) => {\n      state.loading = false;\n      state.categories = null;\n      state.error = action.payload;\n    });\n    //Reset err\n    builder.addCase(resetErrAction.pending, (state, action) => {\n      state.error = null;\n    });\n    //Reset success\n    builder.addCase(resetSuccessAction.pending, (state, action) => {\n      state.isAdded = false;\n    });\n  },\n});\n\n//generate the reducer\nconst categoryReducer = categorySlice.reducer;\n\nexport default categoryReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
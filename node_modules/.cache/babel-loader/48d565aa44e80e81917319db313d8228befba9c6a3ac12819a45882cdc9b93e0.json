{"ast":null,"code":"const {\n  createAsyncThunk,\n  createSlice\n} = require(\"@reduxjs/toolkit\");\n\n//initalsState\nconst initialState = {\n  cartItems: [],\n  loading: false,\n  error: null,\n  isAdded: false,\n  isUpdated: false,\n  isDelete: false\n};\n\n//add product to cart\nexport const addOrderToCartaction = createAsyncThunk(\"cart/add-to-cart\", async cartItem => {\n  const cartItems = localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\n  //push to storage\n  cartItems.push(cartItem);\n  localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n});\n//add product to cart\nexport const getCartItemsFromLocalStorageAction = createAsyncThunk(\"cart/get-order-items\", async () => {\n  const cartItems = localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\n  return cartItems;\n});\n\n//add product to cart\nexport const changeOrderItemQty = createAsyncThunk(\"cart/change-item-qty\", async _ref => {\n  let {\n    productId,\n    qty\n  } = _ref;\n  console.log(productId, qty);\n  const cartItems = localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\n  const newCartItems = cartItems === null || cartItems === void 0 ? void 0 : cartItems.map(item => {\n    var _item$_id;\n    if ((item === null || item === void 0 ? void 0 : (_item$_id = item._id) === null || _item$_id === void 0 ? void 0 : _item$_id.toString()) === (productId === null || productId === void 0 ? void 0 : productId.toString())) {\n      //get new price\n      const newPrice = (item === null || item === void 0 ? void 0 : item.price) * qty;\n      item.qty = +qty;\n      item.totalPrice = newPrice;\n    }\n    return item;\n  });\n  localStorage.setItem(\"cartItems\", JSON.stringify(newCartItems));\n});\n\n//remove from cart\nexport const removeOrderItemQty = createAsyncThunk(\"cart/removeOrderItem\", async productId => {\n  const cartItems = localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\n  const newItems = cartItems === null || cartItems === void 0 ? void 0 : cartItems.filter(item => (item === null || item === void 0 ? void 0 : item._id) !== productId);\n  localStorage.setItem(\"cartItems\", JSON.stringify(newItems));\n});\n//slice\nconst cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  extraReducers: builder => {\n    //add to cart\n    builder.addCase(addOrderToCartaction.pending, state => {\n      state.loading = true;\n    });\n    builder.addCase(addOrderToCartaction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.cartItems = action.payload;\n      state.isAdded = true;\n    });\n    builder.addCase(addOrderToCartaction.rejected, (state, action) => {\n      state.loading = false;\n      state.cartItems = null;\n      state.isAdded = false;\n      state.error = action.payload;\n    });\n    //fetch cart items\n    builder.addCase(getCartItemsFromLocalStorageAction.pending, state => {\n      state.loading = true;\n    });\n    builder.addCase(getCartItemsFromLocalStorageAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.cartItems = action.payload;\n      state.isAdded = true;\n    });\n    builder.addCase(getCartItemsFromLocalStorageAction.rejected, (state, action) => {\n      state.loading = false;\n      state.cartItems = null;\n      state.isAdded = false;\n      state.error = action.payload;\n    });\n  }\n});\n\n//generate the reducer\nconst cartReducer = cartSlice.reducer;\nexport default cartReducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","require","initialState","cartItems","loading","error","isAdded","isUpdated","isDelete","addOrderToCartaction","cartItem","localStorage","getItem","JSON","parse","push","setItem","stringify","getCartItemsFromLocalStorageAction","changeOrderItemQty","productId","qty","console","log","newCartItems","map","item","_id","toString","newPrice","price","totalPrice","removeOrderItemQty","newItems","filter","cartSlice","name","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","cartReducer","reducer"],"sources":["/home/raisul/Downloads/mern-ecommerce-course-frontend-main/src/redux/slices/cart/cartSlices.js"],"sourcesContent":["const { createAsyncThunk, createSlice } = require(\"@reduxjs/toolkit\");\n\n//initalsState\nconst initialState = {\n  cartItems: [],\n  loading: false,\n  error: null,\n  isAdded: false,\n  isUpdated: false,\n  isDelete: false,\n};\n\n//add product to cart\nexport const addOrderToCartaction = createAsyncThunk(\n  \"cart/add-to-cart\",\n  async (cartItem) => {\n    const cartItems = localStorage.getItem(\"cartItems\")\n      ? JSON.parse(localStorage.getItem(\"cartItems\"))\n      : [];\n    //push to storage\n    cartItems.push(cartItem);\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n  }\n);\n//add product to cart\nexport const getCartItemsFromLocalStorageAction = createAsyncThunk(\n  \"cart/get-order-items\",\n  async () => {\n    const cartItems = localStorage.getItem(\"cartItems\")\n      ? JSON.parse(localStorage.getItem(\"cartItems\"))\n      : [];\n\n    return cartItems;\n  }\n);\n\n//add product to cart\nexport const changeOrderItemQty = createAsyncThunk(\n  \"cart/change-item-qty\",\n  async ({ productId, qty }) => {\n    console.log(productId, qty);\n    const cartItems = localStorage.getItem(\"cartItems\")\n      ? JSON.parse(localStorage.getItem(\"cartItems\"))\n      : [];\n    const newCartItems = cartItems?.map((item) => {\n      if (item?._id?.toString() === productId?.toString()) {\n        //get new price\n        const newPrice = item?.price * qty;\n        item.qty = +qty;\n        item.totalPrice = newPrice;\n      }\n      return item;\n    });\n    localStorage.setItem(\"cartItems\", JSON.stringify(newCartItems));\n  }\n);\n\n//remove from cart\nexport const removeOrderItemQty = createAsyncThunk(\n  \"cart/removeOrderItem\",\n  async (productId) => {\n    const cartItems = localStorage.getItem(\"cartItems\")\n      ? JSON.parse(localStorage.getItem(\"cartItems\"))\n      : [];\n    const newItems = cartItems?.filter((item) => item?._id !== productId);\n    localStorage.setItem(\"cartItems\", JSON.stringify(newItems));\n  }\n);\n//slice\nconst cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  extraReducers: (builder) => {\n    //add to cart\n    builder.addCase(addOrderToCartaction.pending, (state) => {\n      state.loading = true;\n    });\n    builder.addCase(addOrderToCartaction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.cartItems = action.payload;\n      state.isAdded = true;\n    });\n    builder.addCase(addOrderToCartaction.rejected, (state, action) => {\n      state.loading = false;\n      state.cartItems = null;\n      state.isAdded = false;\n      state.error = action.payload;\n    });\n    //fetch cart items\n    builder.addCase(getCartItemsFromLocalStorageAction.pending, (state) => {\n      state.loading = true;\n    });\n    builder.addCase(\n      getCartItemsFromLocalStorageAction.fulfilled,\n      (state, action) => {\n        state.loading = false;\n        state.cartItems = action.payload;\n        state.isAdded = true;\n      }\n    );\n    builder.addCase(\n      getCartItemsFromLocalStorageAction.rejected,\n      (state, action) => {\n        state.loading = false;\n        state.cartItems = null;\n        state.isAdded = false;\n        state.error = action.payload;\n      }\n    );\n  },\n});\n\n//generate the reducer\nconst cartReducer = cartSlice.reducer;\n\nexport default cartReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}